## 1 竞态条件

在并发编程中，由于不恰当的执行时序而出现不正确的

的结果是一种非常重要的情况，它的正式名字就叫竞态条件。

或者可以说：当某个计算的正确性取决于多个线程的交替执行时序时，
那么就会发生竞态条件。

换句话说，就是正确的结果取决于运气。

**最常见的竞态条件类型就是"先检查后执行"**

懒汉式 单例模式 中，就有这个问题。

## 2 重入

重入 意味着获取锁的操作的粒度是"线程"，而不是"调用"。

### 2.1 一种实现方法

为每个锁关联一个获取计数值和一个所有者线程。当计数值为 0 时，

这个锁就被认为是没有任何线程持有。当线程请求一个未被持有的锁时，JVM

将记录下锁的持有者，并且将获取计数值置为 1。如果容一个线程再次获取这个锁，计数值

将递增，而当线程退出同步代码块时，计数器会相应地递减。